{"ast":null,"code":"export var axiosPostable = function axiosPostable(axios) {\n  return axios.create({\n    headers: {\n      'X-CSRF-Token': document.getElementsByName('csrf-token')[0].getAttribute('content'),\n      'Accept': 'application/json'\n    }\n  });\n};\nexport var replaceEditorSelection = function replaceEditorSelection(cm, active, startEnd, url) {\n  // Cribbed directly from EasyMDE code\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className)) return;\n  var text;\n  var start = startEnd[0];\n  var end = startEnd[1];\n  var startPoint = {},\n      endPoint = {};\n  Object.assign(startPoint, cm.getCursor('start'));\n  Object.assign(endPoint, cm.getCursor('end'));\n\n  if (url) {\n    end = end.replace('#url#', url);\n  }\n\n  if (active) {\n    text = cm.getLine(startPoint.line);\n    start = text.slice(0, startPoint.ch);\n    end = text.slice(startPoint.ch);\n    cm.replaceRange(start + end, {\n      line: startPoint.line,\n      ch: 0\n    });\n  } else {\n    text = cm.getSelection();\n    cm.replaceSelection(start + text + end);\n    startPoint.ch += start.length;\n\n    if (startPoint !== endPoint) {\n      endPoint.ch += start.length;\n    }\n  }\n\n  cm.setSelection(startPoint, endPoint);\n  cm.focus();\n};","map":{"version":3,"sources":["/home/jared/apps/yarii-editor/app/javascript/lib/utils.js"],"names":["axiosPostable","axios","create","headers","document","getElementsByName","getAttribute","replaceEditorSelection","cm","active","startEnd","url","test","getWrapperElement","lastChild","className","text","start","end","startPoint","endPoint","Object","assign","getCursor","replace","getLine","line","slice","ch","replaceRange","getSelection","replaceSelection","length","setSelection","focus"],"mappings":"AAAA,OAAO,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,CAAAC,KAAK,EAAI;AACpC,SAAOA,KAAK,CAACC,MAAN,CAAa;AAClBC,IAAAA,OAAO,EAAE;AACP,sBAAgBC,QAAQ,CAACC,iBAAT,CAA2B,YAA3B,EAAyC,CAAzC,EAA4CC,YAA5C,CAAyD,SAAzD,CADT;AAEP,gBAAU;AAFH;AADS,GAAb,CAAP;AAMD,CAPM;AASP,OAAO,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACC,EAAD,EAAKC,MAAL,EAAaC,QAAb,EAAuBC,GAAvB,EAA+B;AACnE;AAEA,MAAI,wBAAwBC,IAAxB,CAA6BJ,EAAE,CAACK,iBAAH,GAAuBC,SAAvB,CAAiCC,SAA9D,CAAJ,EACI;AAEJ,MAAIC,IAAJ;AACA,MAAIC,KAAK,GAAGP,QAAQ,CAAC,CAAD,CAApB;AACA,MAAIQ,GAAG,GAAGR,QAAQ,CAAC,CAAD,CAAlB;AACA,MAAIS,UAAU,GAAG,EAAjB;AAAA,MACIC,QAAQ,GAAG,EADf;AAEAC,EAAAA,MAAM,CAACC,MAAP,CAAcH,UAAd,EAA0BX,EAAE,CAACe,SAAH,CAAa,OAAb,CAA1B;AACAF,EAAAA,MAAM,CAACC,MAAP,CAAcF,QAAd,EAAwBZ,EAAE,CAACe,SAAH,CAAa,KAAb,CAAxB;;AACA,MAAIZ,GAAJ,EAAS;AACLO,IAAAA,GAAG,GAAGA,GAAG,CAACM,OAAJ,CAAY,OAAZ,EAAqBb,GAArB,CAAN;AACH;;AACD,MAAIF,MAAJ,EAAY;AACRO,IAAAA,IAAI,GAAGR,EAAE,CAACiB,OAAH,CAAWN,UAAU,CAACO,IAAtB,CAAP;AACAT,IAAAA,KAAK,GAAGD,IAAI,CAACW,KAAL,CAAW,CAAX,EAAcR,UAAU,CAACS,EAAzB,CAAR;AACAV,IAAAA,GAAG,GAAGF,IAAI,CAACW,KAAL,CAAWR,UAAU,CAACS,EAAtB,CAAN;AACApB,IAAAA,EAAE,CAACqB,YAAH,CAAgBZ,KAAK,GAAGC,GAAxB,EAA6B;AACzBQ,MAAAA,IAAI,EAAEP,UAAU,CAACO,IADQ;AAEzBE,MAAAA,EAAE,EAAE;AAFqB,KAA7B;AAIH,GARD,MAQO;AACHZ,IAAAA,IAAI,GAAGR,EAAE,CAACsB,YAAH,EAAP;AACAtB,IAAAA,EAAE,CAACuB,gBAAH,CAAoBd,KAAK,GAAGD,IAAR,GAAeE,GAAnC;AAEAC,IAAAA,UAAU,CAACS,EAAX,IAAiBX,KAAK,CAACe,MAAvB;;AACA,QAAIb,UAAU,KAAKC,QAAnB,EAA6B;AACzBA,MAAAA,QAAQ,CAACQ,EAAT,IAAeX,KAAK,CAACe,MAArB;AACH;AACJ;;AACDxB,EAAAA,EAAE,CAACyB,YAAH,CAAgBd,UAAhB,EAA4BC,QAA5B;AACAZ,EAAAA,EAAE,CAAC0B,KAAH;AACD,CAnCM","sourcesContent":["export const axiosPostable = axios => {\n  return axios.create({\n    headers: {\n      'X-CSRF-Token': document.getElementsByName('csrf-token')[0].getAttribute('content'),\n      'Accept': 'application/json'\n    }\n  })\n}\n\nexport const replaceEditorSelection = (cm, active, startEnd, url) => {\n  // Cribbed directly from EasyMDE code\n\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className))\n      return;\n\n  var text;\n  var start = startEnd[0];\n  var end = startEnd[1];\n  var startPoint = {},\n      endPoint = {};\n  Object.assign(startPoint, cm.getCursor('start'));\n  Object.assign(endPoint, cm.getCursor('end'));\n  if (url) {\n      end = end.replace('#url#', url);\n  }\n  if (active) {\n      text = cm.getLine(startPoint.line);\n      start = text.slice(0, startPoint.ch);\n      end = text.slice(startPoint.ch);\n      cm.replaceRange(start + end, {\n          line: startPoint.line,\n          ch: 0,\n      });\n  } else {\n      text = cm.getSelection();\n      cm.replaceSelection(start + text + end);\n\n      startPoint.ch += start.length;\n      if (startPoint !== endPoint) {\n          endPoint.ch += start.length;\n      }\n  }\n  cm.setSelection(startPoint, endPoint);\n  cm.focus();\n}"]},"metadata":{},"sourceType":"module"}